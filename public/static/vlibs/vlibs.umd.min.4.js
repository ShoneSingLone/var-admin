(("undefined"!==typeof self?self:this)["webpackJsonpvlibs"]=("undefined"!==typeof self?self:this)["webpackJsonpvlibs"]||[]).push([[4],{"391c":function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"layouter"},[s("ul",{staticClass:"item-list panel"},t._l(t.itemInfo,(function(e,n){return s("drag",{key:n,class:["item-wrapper",{"notice-unuse":t.getUsedTimes(e)<1}],attrs:{tag:"li","transfer-data":e}},[t._v(" "+t._s(e.label)+" "),s("span",{directives:[{name:"show",rawName:"v-show",value:t.getUsedTimes(e)>1,expression:"getUsedTimes(item)>1"}],staticClass:"use-many-times"},[t._v("use "+t._s(t.getUsedTimes(e))+" times")])])})),1),s("div",{staticClass:"table"},[s("div",{staticClass:"panel table-options"},t._l(t.tableConfigs,(function(e,n){return s("div",{key:n,staticClass:"config"},[s("span",[t._v(t._s(n)+":")]),s("el-input",{model:{value:t.tableConfigs[n],callback:function(e){t.$set(t.tableConfigs,n,e)},expression:"tableConfigs[prop]"}})],1)})),0),s("table",{staticClass:"table-stage panel"},[t._l(t.dsl,(function(e,n){return s("tr",{key:n},[s("td",{staticClass:"remove-row"},[s("el-button",{on:{click:function(e){return t.removeRow(n)}}},[t._v(" -Row ")])],1),t._l(e,(function(e,a){return s("drop",{key:e.p||"empty"+a,staticClass:"td-item",attrs:{tag:"td",colspan:e.c||1,rowspan:e.r||1},on:{drop:function(e){return t.handleDrop({rowIndex:n,colIndex:a},e)}}},[s("drag",{staticClass:"item-wrapper",attrs:{tag:"div","transfer-data":{rowIndex:n,colIndex:a}}},[s("span",{staticClass:"label"},[t._v(t._s(t.itemInfo[e.p]&&t.itemInfo[e.p].label))]),s("i",{staticClass:"el-icon-edit icon",on:{click:function(s){return t.handleClickItem(e,{r:n,c:a})}}})])],1)})),s("td",{staticClass:"add-col"},[s("el-button",{on:{click:function(s){return t.addCol(e)}}},[t._v(" +Col ")]),s("el-button",{on:{click:function(s){return t.removeCol(e)}}},[t._v(" -Col ")])],1)],2)})),s("tr",[s("td",{staticClass:"add-row"},[s("el-button",{on:{click:t.addRow}},[t._v(" +Row ")])],1)])],2)]),s("div",{staticClass:"json-panel"},[s("div",{staticClass:"json-panel-item panel layout"},[s("h6",[t._v("布局")]),s("monaco",{model:{value:t.dsl,callback:function(e){t.dsl=e},expression:"dsl"}})],1),s("div",{staticClass:"json-panel-item panel item-info"},[s("h6",[t._v("所有item信息")]),s("monaco",{attrs:{"is-format":"true"},on:{change:t.handleItemInfoChange},model:{value:t.itemInfo,callback:function(e){t.itemInfo=e},expression:"itemInfo"}})],1),s("div",{staticClass:"json-panel-item panel col-item"},[s("h6",[t._v("单个item布局信息修改")]),s("monaco",{attrs:{value:t.itemDsl,"is-format":"true"},on:{change:t.handleItemChange}})],1)])])},a=[],l=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{ref:"container",staticStyle:{height:"100%"}})},i=[],o=s("f33e"),c=s("e2a0"),r=s.n(c),d=s("6747"),m=s.n(d),u={name:"Monaco",model:{prop:"value",event:"change"},props:["value","isFormat"],data(){return{monacoInstance:!1}},mounted(){this.init(),this.$watch("value",t=>{try{m()(t)&&r()(t[0])&&(t=t.map(t=>[{p:t}]),this.$emit("change",t)),this.monacoInstance&&this.monacoInstance.setValue(this.isFormat?JSON.stringify(t,null,2):JSON.stringify(t))}catch(e){console.log(e)}},{immediate:!0})},methods:{setValue(t){this.monacoInstance&&this.monacoInstance.setValue(JSON.stringify(t))},async init(){try{this.monacoInstance=o["c"].create(this.$refs.container,{language:"javascript",automaticLayout:!0,theme:"vs-dark",minimap:{enabled:!0}}),this.monacoInstance.addCommand(o["b"].CtrlCmd|o["a"].KEY_S,()=>{try{const t=new Function("return "+this.monacoInstance.getValue());this.$emit("change",t())}catch(t){console.error(t),this.setValue(this.value);const e=this.$createElement;this.$message({message:e("p",null,[e("span",null,"JSON 有问题，不转换"),e("i",{style:"color: teal"})])})}})}catch(t){console.error(t)}}}},h=u,p=s("2877"),f=Object(p["a"])(h,l,i,!1,null,null,null),v=f.exports,g=s("0644"),I=s.n(g),C=s("3852"),b=s.n(C),w=s("dd61"),_=s.n(w),x=s("991b"),y=s.n(x),k=s("c641"),$=s.n(k),j=s("df76"),D=s.n(j),E=s("8bbf"),J=s.n(E);J.a.use(D.a);var O={name:"Layouter",components:{Monaco:v},data(){return{tableConfigs:{col:3,row:1},itemInfo:{},currentrc:"",dsl:[[{p:""},{p:""},{p:""}]],itemDsl:{},targetText:"target source"}},computed:{flattendsl(){return y()(this.dsl).map(t=>t.p)}},methods:{getUsedTimes(t){let e=0;return $()(this.flattendsl,s=>{t.prop===s&&e++}),e},addCol(t){t.push({p:""});const e=I()(this.dsl);this.dsl=e},removeCol(t){t.splice(t.length-1);const e=I()(this.dsl);this.dsl=e},addRow(){this.dsl.push(this.dsl[0]&&this.dsl[0].map(()=>({p:""}))||[{p:""}])},removeRow(t){this.dsl.splice(t,1)},handleDrop(t,e){const s=I()(this.dsl);let n,a;b()(e,"label")?n={p:e.prop}:(a=this.dsl[t.rowIndex][t.colIndex],n=this.dsl[e.rowIndex][e.colIndex],s[e.rowIndex][e.colIndex]=a),s[t.rowIndex][t.colIndex]=n,this.dsl=s},handleItemInfoChange(t){this.itemInfo=t;const e=_()(t,t=>t.prop),s=[];let n=[],a=0;while(e.length>0){let t=e.pop();n.push({p:t}),++a>=this.tableConfigs.col&&(s.push(n),n=[],a=0)}a<this.tableConfigs.col&&s.push(n),this.dsl=s},handleItemChange(t){this.itemDsl=t;const{r:e,c:s}=this.currentEditItemInfo;this.dsl[e][s]=t;const n=I()(this.dsl);this.dsl=n},handleClickItem(t,e){this.itemDsl=t,this.currentrc=`r${e.rowIndex}c${e.colIndex}`,this.currentEditItemInfo=e}}},R=O,S=(s("bf94"),Object(p["a"])(R,n,a,!1,null,"295ebb5d",null));e["default"]=S.exports},bf94:function(t,e,s){"use strict";var n=s("e7af"),a=s.n(n);a.a},e7af:function(t,e,s){}}]);
//# sourceMappingURL=vlibs.umd.min.4.js.map